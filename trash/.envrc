# shellcheck shell=bash
if ! has nix_direnv_version || ! nix_direnv_version 3.1.0; then
  source_url "https://raw.githubusercontent.com/nix-community/nix-direnv/3.1.0/direnvrc" "sha256-yMJ2OVMzrFaDPn7q8nCBZFRYpL/f0RcHzhmw/i6btJM="
fi

use flake
watch_file flake.nix
watch_file flake.lock
watch_file gemset.nix

echo -e "\033[1;32m✅ $(basename "$PWD") Rails dev environment loaded\033[0m"

# Show all recipes from justfile in this folder
if command -v just >/dev/null; then
  echo "📋 Available just commands:"
  just --summary
else
  echo "⚠️ just not found in PATH"
fi
